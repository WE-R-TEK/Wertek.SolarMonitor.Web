<div class="grid">
  <div class="col-12 lg:col-12 xl:col-12">
    <p-card header="Simulador de Conta de Energia">
      <p-fieldset legend="Selecione o período">
        <div class="formgrid grid">
          <div class="field col-12 md:col-3">
            <label for="startDate">Data Inicial</label>
            <p-calendar [maxDate]="(maxDate)" [(ngModel)]="startDate" [touchUI]="true" dateFormat="dd/mm/yy" [readonlyInput]="true" [showIcon]="true" styleClass="w-full"></p-calendar>
          </div>
          <div class="field col-12 md:col-3">
            <label for="endDate">Data Final</label>
            <p-calendar [maxDate]="(maxDate)" [minDate]="startDate" [(ngModel)]="endDate" [touchUI]="true" dateFormat="dd/mm/yy" [readonlyInput]="true" [showIcon]="true" styleClass="w-full"></p-calendar>
          </div>
        </div>
        <div class="flex">
          <p-button label="Simular" (click)="simulate()"></p-button>
        </div>
      </p-fieldset>
      <p-fieldset legend="Resultado de {{startDateShow | date: 'dd/MM/yyyy'}} até {{endDateShow | date: 'dd/MM/yyyy'}}" styleClass="mt-4">
        <p-table [value]="simulationData" [tableStyle]="{'min-width': '50rem'}">
          <ng-template pTemplate="header" let-columns>
            <tr>
              <th>Descrição</th>
              <th>Quantidade kWh</th>
              <th>Tarifa R$</th>
              <th>Valor R$</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-data>
            <tr>
              <td>{{data.description}}</td>
              <td>{{data.quantity | number:'1.2-2':'pt'}}</td>
              <td>{{data.rate | number:'1.2-8':'pt'}}</td>
              <td>{{data.value | number:'1.2-2':'pt'}}</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td colspan="3" style="text-align: right">Total</td>
              <td>{{total | number:'1.2-2':'pt'}}</td>
            </tr>
          </ng-template>
        </p-table>
      </p-fieldset>

    </p-card>
  </div>
</div>
